"use strict";angular.module("app",["ngRoute","ngDialog"]).config(["$routeProvider",function(t){t.otherwise({redirectTo:"/restaurants"})}]),function(){function t(t){t.when("/restaurants",{templateUrl:"/js/app/restaurants/restaurants.html",controller:"RestaurantsController",controllerAs:"vm"}).when("/menu/:restId",{templateUrl:"/js/app/menu/menu.html",controller:"MenuController",controllerAs:"vm"}).when("/payment",{templateUrl:"/js/app/payment/payment.html",controller:"PaymentController",controllerAs:"vm"}).when("/confirmation",{templateUrl:"/js/app/confirmation/confirmation.html"})}angular.module("app").config(t),t.$inject=["$routeProvider"]}(),function(){function t(t,e,n,r,o){var a=this;a.items=[],t.getRestaurantDetails(e.restId).then(function(t){a.restaurant=t}),a.viewItem=function(t){a.activeItem=t,a.activeItem.options=[],n.open({template:"item.html",className:"ngdialog-theme-default",scope:r})},a.toggleOption=function(t){var e=a.activeItem.options.indexOf(t);return e>-1?void a.activeItem.options.splice(e,1):void a.activeItem.options.push(t)},a.addItem=function(t){var e={id:t.id,name:t.name,price:t.price};t.options.length>0&&(e.options=t.options.map(function(t){return{id:t.id,name:t.name,price:t.price}})),a.items.push(e),n.close(),console.log(a.items)},a.cancel=function(){n.close()},a.checkout=function(){var n={restId:e.restId,restName:a.restaurant.name,items:a.items};t.createOrder(n).then(function(t){return t.success?o.url("/payment"):void alert("Something went wrong...")})}}angular.module("app").controller("MenuController",t),t.$inject=["api","$routeParams","ngDialog","$scope","$location"]}(),function(){function t(){return{require:"ngModel",link:function(t,e,n,r){r.$validators.creditCard=function(t,e){if(!e)return!0;for(var n=e.length,r=0,o=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],a=0;n--;)a+=o[r][parseInt(e.charAt(n),10)],r^=1;return a%10===0&&a>0}}}}angular.module("app").directive("creditCard",t)}(),function(){function t(t,e){var n=this;n.submit=function(){n.showProgress=!0,t.placeOrder(n.card).then(function(t){return t&&t.success?e.url("/confirmation"):void alert("Something went wrong...")})}}angular.module("app").controller("PaymentController",t),t.$inject=["api","$location"]}(),function(){function t(t){var e=this;t.getRestaurants().then(function(t){e.restaurants=t})}angular.module("app").controller("RestaurantsController",t),t.$inject=["api"]}(),function(){function t(t){function e(){return t.get("/orders/api/restaurants").then(function(t){return t.data})}function n(e){return t.get("/orders/api/restaurant-details/"+e).then(function(t){return t.data})}function r(e){return t.post("/orders/api/create-order",e).then(function(t){return t.data})}function o(e){return t.post("/orders/api/place-order",e).then(function(t){return t.data})}return{getRestaurants:e,getRestaurantDetails:n,createOrder:r,placeOrder:o}}angular.module("app").factory("api",t),t.$inject=["$http"]}();